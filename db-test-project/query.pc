// 작성자 : 이종민
// query.pc
#define _CRT_SECURE_NO_WARNINGS
//-----------------------------------------

#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <conio.h>

/* for oracle */
#include <sqlda.h>
#include <sqlca.h>
#include <sqlcpr.h>


// win32 Visual C 2010 이상컴파일시 추가
#define getch() _getch()
//-----------------------------------------

/*---------------  화면 커서 위치 제어 ----------------------*/
#include < windows.h >
void gotoxy(int x, int y) ;
void getxy(int *x, int *y) ;
void clrscr(void) ;
/*-----------------------------------------------------------*/

void query11();
void insert_query(char[] query);

EXEC SQL BEGIN DECLARE SECTION;
	VARCHAR uid[80];
	VARCHAR pwd[20];
EXEC SQL END DECLARE SECTION;



void query11()
{
	_putenv("NLS_LANG=American_America.KO16KSC5601"); //한글사용
	DB_connect();
	EXEC SQL COMMIT WORK RELEASE ;
	getch();
}

void insert_query(char[] query) {
	//DB_connect();
	EXEC SQL BEGIN DECLARE SECTION;

    char dynstmt[1000];
	EXEC SQL END DECLARE SECTION;

	sprintf(dynstmt, query);
    EXEC SQL WHENEVER SQLERROR DO sql_error("\7ORACLE ERROR:\n");

	EXEC SQL EXECUTE IMMEDIATE :dynstmt ;

    EXEC SQL COMMIT WORK ;
}

