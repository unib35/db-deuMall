// 작성자 : 이종민
// createAccount.pc
#define _CRT_SECURE_NO_WARNINGS
//-----------------------------------------

#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#include <string.h>
#include <conio.h>
#include "cursorControl.h"

/* for oracle */
#include <sqlda.h>
#include <sqlca.h>
#include <sqlcpr.h>


// win32 Visual C 2010 이상컴파일시 추가
#define getch() _getch()
//-----------------------------------------

/*---------------  화면 커서 위치 제어 ----------------------*/
#include < windows.h >
void gotoxy(int x, int y) ;
void getxy(int *x, int *y) ;
void clrscr(void) ;
/*-----------------------------------------------------------*/

void sql_error();
extern cursorControl();
void createAccount();
void select_createAccount();
bool is_idExisted;
//extern insert_query(char[] query);

EXEC SQL BEGIN DECLARE SECTION;
	VARCHAR uid[80];
	VARCHAR pwd[20];
EXEC SQL END DECLARE SECTION;

#define getch() _getch()

void createAccount()
{
	_putenv("NLS_LANG=American_America.KO16KSC5601"); //한글사용
	DB_connect();
	select_createAccount();
	EXEC SQL COMMIT WORK RELEASE ;
	getch();
}

void select_createAccount()
{
	clrscr(); 
	int idCheckFailed = 0;

	while(1){
		clrscr();
		gotoxy(0, 1);
		print_screen("scr_createAccount.txt");

		if(idCheckFailed == 1){
			gotoxy(29,17);
			printf("이미 존재하는 ID 입니다.");
		}
		idCheckFailed = 1;


		gotoxy(35, 7);
		gets(input_id); //id 입력
		
		gotoxy(34, 9); //중복확인
		if(is_idChecked(input_id)){
			break;
		}

		gotoxy(35, 11);
		gets(input_pw); //pw 입력

		gotoxy(35, 13);
		gets(input_checkpw); //checkpw 입력

		gotoxy(35, 15);
		gets(input_name); //name 입력
		  
		gotoxy(35, 19); // 버튼 선택으로 이동
		int y=cursorControl(35, 20, 22, 2);

		if(y == 20){
			//insert_query("INSERT INTO members (member_id, pw, name) VALUES ('%s', '%s', '%s')", input_id, input_pw, input_name);
		}

	}
	
}

